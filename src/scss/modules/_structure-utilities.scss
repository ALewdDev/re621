/* Vanilla Overrides */
// Compatibility fix for modals
body {
    display: flex;
    min-height: 100vh;
    flex-direction: column;

    input:focus,
    textarea:focus,
    select:focus {
        outline: 0;
    }

    div#page {
        flex: 1;
        position: relative;
    }
}

// Gridify the header
@media (min-width: 800px) {
    header#top {
        h1 {
            display: none !important;
        }

        nav#nav {
            display: grid !important;
            grid-template-columns: auto 1fr auto;

            menu.logo:not(.main) {
                background: unset;
                margin: 0 0 0 0.5rem;
                padding: 0.25rem 0;
                font-weight: 700;
            }

            menu.logo a {
                padding: 6px 10px;
            }

            menu.main {
                overflow: hidden;
                white-space: nowrap;
                padding-left: 0;
                padding-right: 0;
            }

            menu.extra:not(.main) {
                background: unset;
                margin: 0 0.5rem 0 0;
                padding: 0.25rem 0;
                font-weight: 700;
            }

            menu.extra a {
                padding: 6px 10px;
            }

            menu.submenu {
                grid-row: 2;
                grid-column: 1;
                grid-area: 2 / 1 / 2 / 4;
                height: 1.125rem;
            }
        }
    }
}

/* Gridify the sidebar */
div#c-posts div#a-index,
div#c-posts div#a-show,
div#c-favorites div#a-index {
    display: grid;
    grid-template-columns: 15em auto;
    grid-column-gap: 1.25rem;

    aside#sidebar {
        width: unset;
        float: unset;

        div#re621-search {
            position: relative;
            margin: -0.5rem -0.5rem 0;
            padding: 0.5rem 0.5rem;
            border-radius: 6px 6px 0 0;

            &[data-sticky=true] {
                position: sticky;
                top: -1px;
            }
        }

        section {
            margin-bottom: 0.5rem;
        }

        section#search-box form,
        section#re-instantsearch form,
        section#mode-box form {
            display: grid;
            grid-template-columns: auto 2rem;

            input[type=text],
            button[type=submit] {
                width: 100%;
            }

            select[name=mode] {
                width: unset;
                grid-column: span 2;
            }
        }
    }

    section#content {
        margin-left: unset;
        padding-left: unset;
    }
}


/* Taglist Helpers */
#tag-box>ul,
#tag-list>ul {

    margin-right: -1rem;

    li {
        display: flex;
        line-height: 1rem;
        margin-bottom: 1px;

        a.search-inc-tag,
        a.search-exl-tag {
            padding-right: 0.125rem;
        }

        a.search-tag {
            max-width: min-content;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        div.tag-actions {
            min-width: fit-content;
            margin-left: auto;
            line-height: 1rem;

            span {
                margin: 0 0.125rem;
                min-width: fit-content;

                &.tag-action-blacklist {
                    display: none;
                }

                &.post-count {
                    display: inline-block;
                }

                &.tag-action-subscribe a.subscribe {
                    visibility: hidden;
                }
            }
        }

        &:hover {

            a.search-tag {
                white-space: normal;
                max-width: unset;
            }

            div.tag-actions span {

                &.tag-action-blacklist {
                    display: inline-block;
                }

                &.post-count {
                    display: none;
                }

                &.tag-action-subscribe a.subscribe {
                    visibility: visible;
                }
            }
        }

    }
}

/* Error Handling Styles */
textarea.error-feedback {
    width: 100%;
    min-height: 25vh;
    overflow-x: hidden;
    white-space: pre;

    @include scrollbars;
}
